<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.9.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Category: Server - Jade&#39;s Blog</title>


    <meta property="og:type" content="website">
<meta property="og:title" content="Jade&#39;s Blog">
<meta property="og:url" content="https://j2de.github.io/categories/server/index.html">
<meta property="og:site_name" content="Jade&#39;s Blog">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://j2de.github.io/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jade&#39;s Blog">
<meta name="twitter:image" content="https://j2de.github.io/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="Jade&#39;s Blog" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/categories">Categories</a></li>
            
            <li class="is-active"><a href="#" aria-current="page">Server</a></li>
        </ul>
        </nav>
    </div>
</div>

    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-06-10T15:00:00.000Z">2019-06-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/spring/">Spring</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 145 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019-06-11-intellij-devtools/">IntelliJ에서 SpringBoot DevTools 사용하기</a>
            
        </h1>
        <div class="content">
            <p>SpringBoot의 경우 정적 리소스(html,css,js 등)들을 <code>resource</code> 폴더 하위에서 관리하기 때문에 정적 리소스를 갱신하기 위해 <code>Tomcat</code>을 재시작해야한다.</p>
<p><code>DevTools</code> 를 사용하면 자동으로 정적 리소스를 <code>reload</code> 할 수 있게 된다.</p>
<p>하지만 IntelliJ에서 사용시 DevTools을 추가해도 적용이 안되는 경우가 있다.</p>
<blockquote>
<p>intellij devtools not working</p>
</blockquote>
<p>이 때 IntelliJ에서 추가적인 설정을 해주어야 한다.</p>
<ul>
<li>IntelliJ에서 DevTool 사용하기</li>
</ul>
<p><img src="/images/2019-06-11/intellij-devtools1.png" alt="devtools1"></p>
<ul>
<li><code>cmd + shift + a</code> : <code>registry</code> 검색</li>
</ul>
<p><img src="/images/2019-06-11/intellij-devtools2.png" alt="devtools2"></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-04T15:00:00.000Z">2018-12-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/test/">Test</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 452 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-12-05-test-stub/">Test - Stub</a>
            
        </h1>
        <div class="content">
            <h2 id="스텁-Stub-이란"><a href="#스텁-Stub-이란" class="headerlink" title="스텁(Stub)이란?"></a>스텁(Stub)이란?</h2><p>호출자를 실제 구현물로부터 격리시킬 목적으로 런타임에 실제 코드 대신 삽입되는 코드 조각이다. 실제 코드의 일부를 독립적으로 테스트하기 위해 쓰인다.<br>스텁은 로직이 없고 값만을 반환하기 때문에, 테스트 시 무조건 정해진 값을 반환한다고 가정한 경우 사용할 수 있다.<br>행위에 대한 검증은 mock을 이용한다. </p>
<h3 id="스텁을-사용하는-경우"><a href="#스텁을-사용하는-경우" class="headerlink" title="스텁을 사용하는 경우"></a>스텁을 사용하는 경우</h3><ul>
<li>시스템이 너무 복잡하고 깨지기 쉬워 수정이 불가한 경우</li>
<li>하부 시스템 간의 통합 테스트처럼 포괄적인 테스트를 수행하는 경우</li>
</ul>
<blockquote>
<p>스텁을 이용한 테스트의 신뢰도는 높은 편이다. 왜냐하면 대상 객체를 수정할 필요가 없어 production용 제품과 동일하기 때문이다.</p>
</blockquote>
<h3 id="스텁의-단점"><a href="#스텁의-단점" class="headerlink" title="스텁의 단점"></a>스텁의 단점</h3><ul>
<li>스텁은 대체하려는 코드와 동일한 로직을 갖추어야하므로 검증할 시스템이 복잡할수록 제작하기 어렵다.</li>
<li>제작이 복잡해 스텁 자체를 디버깅하는 상황도 발생한다.</li>
<li>복잡성 때문에 유지보수가 어려울 수 있다.</li>
<li>상세한(fine-grained) 테스트에 적합하지 않다.</li>
<li>상황에 따라 다른 스텁 정책이 요구된다.</li>
</ul>
<blockquote>
<p>일반적으로 포괄적인 코드 블록을 대체하는 것에 적합하다.<br>파일 시스템, 서버와의 커넥션, 데이터베이스 등 외부 시스템 전체를 대체하는데 주로 사용한다.<br>특정 메소드 하나를 대체하는 경우는 mock 객체로 상세한 테스트를 진행하는 것이 좋다.</p>
</blockquote>
<br/>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-24T15:00:00.000Z">2018-11-25</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/orm/">ORM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1046 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-11-25-spring-data-jpa-query/">Spring Data JPA - Query Method</a>
            
        </h1>
        <div class="content">
            <h2 id="쿼리-메소드-Query-Method"><a href="#쿼리-메소드-Query-Method" class="headerlink" title="쿼리 메소드 (Query Method)"></a>쿼리 메소드 (Query Method)</h2><ul>
<li>메소드 이름만으로 쿼리를 생성하는 기능.</li>
<li>인터페이스에 메소드를 선언만 하면 해당 메소드 이름으로 적절한 JPQL 쿼리를 생성해 실행한다.</li>
</ul>
<br/>

<h3 id="스프링-데이터-JPA가-제공하는-쿼리-메소드-기능"><a href="#스프링-데이터-JPA가-제공하는-쿼리-메소드-기능" class="headerlink" title="스프링 데이터 JPA가 제공하는 쿼리 메소드 기능"></a>스프링 데이터 JPA가 제공하는 쿼리 메소드 기능</h3><ol>
<li>메소드 이름으로 <code>쿼리 생성</code></li>
<li>메소드 이름으로 JPA <code>NamedQuery 호출</code></li>
<li><code>@Query</code> 어노테이션 사용해 리포지토리 인터페이스에 <code>쿼리 직접 정의</code></li>
</ol>
<blockquote>
<p>이 세가지 기능들만으로도 필요한 대부분의 쿼리 기능을 개발할 수 있다.</p>
</blockquote>
<br/>

<h4 id="1-메소드-이름으로-쿼리-생성"><a href="#1-메소드-이름으로-쿼리-생성" class="headerlink" title="1. 메소드 이름으로 쿼리 생성"></a>1. 메소드 이름으로 쿼리 생성</h4><ul>
<li>예) 이메일과 이름으로 회원을 조회하려면<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span> <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">Memeber</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function">List&lt;Member&gt; <span class="title">findByEmailAndName</span><span class="params">(String email, String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>인터페이스에 정의한 <code>findByEmailAndName</code>를 실행하면 스프링 JPA가 메소드 이름을 분석해 JPQL을 생성하고 실행한다.</p>
<ul>
<li>아래와 같은 SQL이 실행된다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> m <span class="keyword">from</span> <span class="keyword">Member</span> m <span class="keyword">where</span> m.email = ?<span class="number">1</span> <span class="keyword">and</span> m.name = ?<span class="number">2</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>정해진 규칙에 따라 이름을 지어야한다.</p>
<blockquote>
<p><a href="https://docs.spring.io/spring-data/jpa/docs/1.8.0.RELEASE/reference/html/">참고</a></p>
</blockquote>
<br/>

<h4 id="2-메소드-이름으로-JPA-NamedQuery-호출"><a href="#2-메소드-이름으로-JPA-NamedQuery-호출" class="headerlink" title="2. 메소드 이름으로 JPA NamedQuery 호출"></a>2. 메소드 이름으로 JPA NamedQuery 호출</h4><ul>
<li><p>스프링 데이터 JPA는 메소드 이름으로 JPA NamedQuery를 호출할 수 있다.  </p>
</li>
<li><p>JPA NamedQuery는 쿼리에 이름을 부여해 사용하는 방법을 칭한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@NamedQuery</span>(</span><br><span class="line">  name=<span class="string">"Member.findByUsername"</span>,</span><br><span class="line">  query=<span class="string">"select m from Member m where m.username = :username"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>위와 같이 어노테이션에 쿼리를 정의할 수 있다.</p>
</li>
</ul>
<br/>

<ul>
<li>또는 xml에 쿼리를 정의할 수 있다.<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">named-query</span> <span class="attr">name</span>=<span class="string">"Member.findByUsername"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">query</span>&gt;</span><span class="tag">&lt;<span class="name">CDATA[</span></span></span><br><span class="line"><span class="tag">      <span class="attr">select</span> <span class="attr">m</span></span></span><br><span class="line"><span class="tag">      <span class="attr">from</span> <span class="attr">Member</span> <span class="attr">m</span></span></span><br><span class="line"><span class="tag">      <span class="attr">where</span> <span class="attr">m.username</span> = <span class="string">:username</span></span></span><br><span class="line"><span class="tag">      ]&gt;</span><span class="tag">&lt;/<span class="name">query</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">named-query</span>&gt;</span></span><br><span class="line">  ```  </span><br><span class="line">- 위와 같은 방법들로 Named 네이티브 쿼리도 지원한다.</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">- 정의한 NamedQuery를 직접 호출하려면 아래와 같이 작성한다.</span><br><span class="line">  ```java</span><br><span class="line">  pulic class MemberRepository &#123;</span><br><span class="line">    public List<span class="tag">&lt;<span class="name">Member</span>&gt;</span> findByUsername(String username) &#123;</span><br><span class="line">      ...</span><br><span class="line">      List<span class="tag">&lt;<span class="name">Member</span>&gt;</span> resultList =</span><br><span class="line">        em.createNamedQuery("Member.findByUsername", Member.class)</span><br><span class="line">          .setParameter("username", "회원1")</span><br><span class="line">          .getResultList();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<br/>

<ul>
<li><p>스프링 데이터 JPA를 사용하면 메소드 이름만으로 NamedQuery를 호출할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span></span></span><br><span class="line"><span class="class">  <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; </span>&#123; <span class="comment">// 여기 선언한 Member 도메인 클래스</span></span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;Member&gt; <span class="title">findByUsername</span><span class="params">(@Param(<span class="string">"username"</span>)</span> String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&quot;도메인 클래스 + . + 메소드 이름&quot;</code>으로 NamedQuery를 찾기 때문에 Member.findByUsername이라는 NamedQuery를 찾아 실행하게 된다.</p>
</li>
</ul>
<br/>

<h4 id="3-Query-어노테이션-사용해-리포지토리-인터페이스에-쿼리-직접-정의"><a href="#3-Query-어노테이션-사용해-리포지토리-인터페이스에-쿼리-직접-정의" class="headerlink" title="3. @Query 어노테이션 사용해 리포지토리 인터페이스에 쿼리 직접 정의"></a>3. @Query 어노테이션 사용해 리포지토리 인터페이스에 쿼리 직접 정의</h4><ul>
<li><p>리포지토리 메소드에 직접 쿼리를 정의하는 경우 @Query 어노테이션 사용</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Query</span>(<span class="string">"select m from Member m where m.username= ?1"</span>)</span><br><span class="line">  <span class="function">Member <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>위 방법은 실행할 메소드에 정적 쿼리를 직접 작성해서 이름 없는 NamedQuery이다.</p>
</li>
</ul>
<br/>

<ul>
<li>Native SQL을 사용하려면 @Query 어노테이션에 nativeQuery = true 옵션을 준다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Query</span>(value=<span class="string">"SELECT * FROM MEMBER USERNAME = ?0"</span>, nativeQuery = <span class="keyword">true</span>)</span><br><span class="line">  <span class="function">Member <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<br/>

<h3 id="파라미터-바인딩"><a href="#파라미터-바인딩" class="headerlink" title="파라미터 바인딩"></a>파라미터 바인딩</h3><p>스프링 데이터 JPA는 위치 기반 파라미터 바인딩과 이름 기반 파라미터 바인딩을 모두 지원한다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> m <span class="keyword">from</span> <span class="keyword">Member</span> m <span class="keyword">where</span> m.username = ?<span class="number">1</span> // 위치 기반</span><br><span class="line"><span class="keyword">select</span> m <span class="keyword">from</span> <span class="keyword">Member</span> m <span class="keyword">where</span> m.username = :<span class="keyword">name</span> // 이름 기반</span><br></pre></td></tr></table></figure>

<p>이름 기반 파라미터 바인딩을 사용하려면 <code>@Param(org.springframework.data.repository.query.Param)</code> 어노테이션을 사용해야한다. 코드 가독성과 유지 보수를 위해 이름 기반 파라미터 바인딩을 사용하는 것이 좋다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Query</span>(<span class="string">"select m from Member m where m.username = :name"</span>)</span><br><span class="line">  <span class="function">Member <span class="title">findByUsername</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="반환-타입"><a href="#반환-타입" class="headerlink" title="반환 타입"></a>반환 타입</h3><p>스프링 데이터 JPA의 반환 타입은 유연해서, 결과가 한 건 이상이면 컬렉션 인터페이스를, 한 건이면 반환 타입을 지정해주면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;Member&gt; <span class="title">findByName</span><span class="params">(String name)</span></span>; <span class="comment">// Collection (1)</span></span><br><span class="line"><span class="function">Member <span class="title">findByEmail</span><span class="params">(String email)</span></span>; <span class="comment">// return type (2)</span></span><br></pre></td></tr></table></figure>

<p>만약 조회 결과가 없다면 (1)은 빈 컬렉션을, (2)는 null을 반환한다.<br>(2)와 같이 작성하고 반환 결과가 2건 이상이면 <code>javax.persistence.NonUniqueResultException</code> 예외가 발생한다.<br>그리고 한 건을 조회 했을 때 JPA 내부에서 <code>Query.getSingleResult()</code>를 호출하는데, 이 메소드는 조회 결과가 없으면 <code>javax.persistence.NoResultException</code> 예외가 발생한다. 이 예외가 발생했을 때 스프링 데이터 JPA는 예외를 무시하고 null을 반환한다.</p>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-15T15:00:00.000Z">2018-11-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/orm/">ORM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 854 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-11-16-jpa-cascade/">JPA - Cascade</a>
            
        </h1>
        <div class="content">
            <p>영속성 전이와 고아 객체</p>
<h2 id="영속성-전이-Transitive-Persistence"><a href="#영속성-전이-Transitive-Persistence" class="headerlink" title="영속성 전이(Transitive Persistence)"></a>영속성 전이(Transitive Persistence)</h2><ul>
<li>연관된 객체를 함께 저장하거나 함께 삭제할 수 있는 JPA에서 제공하는 기능.</li>
<li>특정 엔티티를 영속 상태로 만들 때 연관된 엔티티도 함께 영속 상태로 만들고 싶은 경우 사용.</li>
<li><code>CASCADE</code> 옵션</li>
</ul>
<blockquote>
<p>즉, 부모 엔티티를 저장할 때 자식 엔티티도 함께 저장할 수 있다.</p>
</blockquote>
<br>

<ul>
<li>CASCADE 설정이 없는 경우</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// save parent</span></span><br><span class="line">Parent parent = <span class="keyword">new</span> Parent();</span><br><span class="line">em.persist(parent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// save child1</span></span><br><span class="line">Child child1 = <span class="keyword">new</span> Child();</span><br><span class="line">child1.setParent(parent); <span class="comment">// child1 &gt; parent 연관관계 설정</span></span><br><span class="line">parent.getChildren().add(child1); <span class="comment">// parent &gt; child1</span></span><br><span class="line">em.persist(child1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// save child2</span></span><br><span class="line">Child child2 = <span class="keyword">new</span> Child();</span><br><span class="line">child2.setParent(parent); <span class="comment">// child2 &gt; parent</span></span><br><span class="line">parent.getChildren().add(child2); <span class="comment">// parent &gt; child2</span></span><br><span class="line">em.persist(child2);</span><br></pre></td></tr></table></figure>

<ul>
<li>JPA에서 Entity를 저장할 때 연관된 모든 엔티티가 영속 상태여야 하기 때문에 관련된 모든 엔티티를 각각 영속화했다.</li>
</ul>
<br>

<h3 id="영속성-전이-저장"><a href="#영속성-전이-저장" class="headerlink" title="영속성 전이: 저장"></a>영속성 전이: 저장</h3><ul>
<li>CASCADE 설정</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="meta">@OneToMany</span>(mappedBy = <span class="string">"parent"</span>, cascade = CascadeType.PERSIST) <span class="comment">// (1)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;Child&gt; children = <span class="keyword">new</span> ArrayList&lt;Child&gt;();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>(1) 부모를 영속화할 때 연관된 자식들도 함께 영속화 하는 옵션이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Child child1 = <span class="keyword">new</span> Child();</span><br><span class="line">Child child2 = <span class="keyword">new</span> Child();</span><br><span class="line"></span><br><span class="line">Parent parent = <span class="keyword">new</span> Parent();</span><br><span class="line">child1.setParent(parent); <span class="comment">// 연관관계 설정</span></span><br><span class="line">child2.setParent(parent); <span class="comment">// 연관관계 설정</span></span><br><span class="line">parent.getChildren().add(child1);</span><br><span class="line">parent.getChildren().add(child2);</span><br><span class="line"></span><br><span class="line">em.persist(parent) <span class="comment">// 부모, 자식 한번에 저장</span></span><br></pre></td></tr></table></figure>

<br>

<h3 id="영속성-전이-삭제"><a href="#영속성-전이-삭제" class="headerlink" title="영속성 전이: 삭제"></a>영속성 전이: 삭제</h3><ul>
<li>CASCADE 설정이 없는 경우  </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Parent findParent = em.find(Parent.class, <span class="number">1l</span>);</span><br><span class="line">Child findChild1 = em.find(Child.class, <span class="number">1l</span>);</span><br><span class="line">Child findChild2 = em.find(Child.class, <span class="number">2l</span>);</span><br><span class="line"></span><br><span class="line">em.remove(findChild1);</span><br><span class="line">em.remove(findChild2);</span><br><span class="line">em.remove(findParent);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>각각 엔티티를 하나씩 제거해야한다.</p>
</li>
<li><p>CASCADE 설정(<code>CascadeType.REMOVE</code>)</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Parent findParent = em.find(Parent.class, <span class="number">1l</span>);</span><br><span class="line">em.remove(findParent);</span><br></pre></td></tr></table></figure>

<ul>
<li>연관된 엔티티를 모두 삭제한다(내부적으로 DELETE SQL을 3번 호출한다)</li>
<li>CascadeType.REMOVE를 설정하지 않고 위 코드를 실행하면 <code>외래키 무결성 예외</code>가 발생한다.</li>
</ul>
<br>

<h3 id="CASCADE-종류"><a href="#CASCADE-종류" class="headerlink" title="CASCADE 종류"></a>CASCADE 종류</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> CascadeType &#123;</span><br><span class="line">  ALL,      <span class="comment">// 모두 적용</span></span><br><span class="line">  PERSIST,  <span class="comment">// 영속</span></span><br><span class="line">  MERGE,    <span class="comment">// 병합</span></span><br><span class="line">  REMOVE,   <span class="comment">// 삭제</span></span><br><span class="line">  REFRESH,  <span class="comment">// REFRESH</span></span><br><span class="line">  DETACH    <span class="comment">// DETACH</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>여러 속성을 같이 사용할 수 있다.</li>
<li>PERSIST, REMOVE는 em.persist(), em.remove()할 때 전이가 일어나는 것이 아닌 flush할 때 전이가 발생한다.</li>
</ul>
<br>

<h2 id="고아-객체-ORPHAN"><a href="#고아-객체-ORPHAN" class="headerlink" title="고아 객체(ORPHAN)"></a>고아 객체(ORPHAN)</h2><p>부모 Entity와 연관관계가 끊어진 자식 Entity를 자동으로 삭제하는 기능을 고아 객체 제거라 한다.<br>즉, 부모 Entity의 컬렉션에서 자식 Entity의 참조만 제거하면 자식 Entity가 자동으로 삭제된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">  <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@OneToMany</span>(mappedBy = <span class="string">"parent"</span>, orphanRemoval = <span class="keyword">true</span>) <span class="comment">// (1)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;Child&gt; children = <span class="keyword">new</span> ArrayList&lt;Child&gt;();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Parent parent1 = em.find(Parent.class, id);</span><br><span class="line">parent1.getChildren().remove(<span class="number">0</span>); <span class="comment">// 자식 Entity를 컬렉션에서 제거</span></span><br></pre></td></tr></table></figure>

<ul>
<li>실행 결과 SQL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">child</span> <span class="keyword">where</span> <span class="keyword">id</span>=?</span><br></pre></td></tr></table></figure>

<ul>
<li>고아 객체 제거 기능은 flush 시점에 적용된다.</li>
</ul>
<br>

<h3 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h3><ul>
<li>참조가 제거된 엔티티는 다른 곳에서 참조하지 않으므로 삭제한다.</li>
<li>참조하는 곳이 하나일 때만 사용해야 한다.</li>
<li>따라서 <code>@OneToOne</code>, <code>@OneToMany</code>에서만 사용가능하다.</li>
<li>부모 객체를 제거하면 자식도 같이 제거된다. ( = <code>CascadeType.REMOVE</code>)</li>
</ul>
<br>

<h2 id="영속성-전이-고아-객체-생명주기"><a href="#영속성-전이-고아-객체-생명주기" class="headerlink" title="영속성 전이 + 고아 객체, 생명주기"></a>영속성 전이 + 고아 객체, 생명주기</h2><ul>
<li><p><code>CascadeType.All</code> + <code>orphanRemoval = true</code>를 동시에 사용한다면 ?</p>
<blockquote>
<p>부모 엔티티를 통해 자식 엔티티 생명주기를 관리할 수 있다.</p>
</blockquote>
</li>
<li><p>자식을 저장하려면 부모에 등록만 하면 된다.</p>
</li>
<li><p>자식을 삭제하려면 부모에서 제거하면 된다.</p>
</li>
</ul>
<br>

<ul>
<li>참고<blockquote>
<p>영속성 전이는 DDD의 Aggregate Root 구현시 편리하다.</p>
</blockquote>
</li>
</ul>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-14T15:00:00.000Z">2018-11-15</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/orm/">ORM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 minutes read (About 2521 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-11-15-jpa-proxy/">JPA - Proxy / Eager &amp; Lazy Loading</a>
            
        </h1>
        <div class="content">
            <p>프록시와 즉시로딩, 지연로딩</p>
<h2 id="프록시-Proxy"><a href="#프록시-Proxy" class="headerlink" title="프록시(Proxy)"></a>프록시(Proxy)</h2><ul>
<li><p>프록시를 사용하면 연관된 객체를 DB에서 처음부터 조회하는 것이 아니라, 실제 사용하는 시점에 DB에서 조최할 수 있다(<code>Lazy Loading</code>). 하지만 자주 함께 사용하는 객체들은 조인을 사용해서 함께 조회하는 것이 효과적이다(<code>Eager Loading</code>). 이를 즉시 로딩과 지연 로딩 두 가지 방식으로 사용할 수 있다.</p>
</li>
<li><p>지연 로딩 기능을 사용하려면 실제 엔티티 객체 대신 DB 조회를 지연할 수 있는 가짜 객체가 필요하다. 이를 프록시 객체라 한다.</p>
</li>
</ul>
<blockquote>
<p>JPA 지연 로딩의 구현 방법을 JPA 구현체에 위임했기 때문에 JPA마다 다르다.<br>참고하는 자료는 Hibernate 기준으로 작성되었다.</p>
</blockquote>
<br>

<h3 id="프록시-기초"><a href="#프록시-기초" class="headerlink" title="프록시 기초"></a>프록시 기초</h3><ul>
<li><p>JPA에서 식별자로 Entity 하나를 조회할 경우</p>
<blockquote>
<p>EntityManager.find()</p>
</blockquote>
<ul>
<li>이렇게 엔티티를 조회하면 엔티티 사용여부와 상관없이 DB를 직접 조회하게 된다.</li>
</ul>
</li>
<li><p>사용 시점까지 Entity 조회를 미루고 싶은 경우</p>
<blockquote>
<p>EntityManager.getReference()</p>
</blockquote>
<ul>
<li>이 메소드를 호출하면 JPA가 DB를 바로 조회하지 않고 엔티티 객체를 생성하지도 않는다. 대신 DB 접근을 위임한 프록시 객체를 반환한다.</li>
<li>Proxy { Entity target = null / getId() / getName()}</li>
</ul>
</li>
</ul>
<br>

<h4 id="프록시의-특징"><a href="#프록시의-특징" class="headerlink" title="프록시의 특징"></a>프록시의 특징</h4><h5 id="프록시의-구조"><a href="#프록시의-구조" class="headerlink" title="프록시의 구조"></a>프록시의 구조</h5><ul>
<li>프록시 클래스는 실제 클래스를 상속 받아 만들어지기 때문에 실제 클래스와 겉 모양이 같다. 따라서 사용자는 실제 객체인지 프록시 객체인지 구분하지 않고 사용할 수 있다.</li>
<li>ex) Entity가 id, name, getId(), getName()으로 되어있다면 Proxy는 Entity target, getId(), getName()으로 되어있음</li>
</ul>
<h5 id="프록시-위임"><a href="#프록시-위임" class="headerlink" title="프록시 위임"></a>프록시 위임</h5><ul>
<li>프록시 객체는 실제 객체에 대한 참조(<code>target</code>)를 보관하고, 프록시 객체의 메소드를 호출할 때 프록시 객체가 실제 객체의 메소드를 호출한다.</li>
</ul>
<h4 id="프록시-객체의-초기화"><a href="#프록시-객체의-초기화" class="headerlink" title="프록시 객체의 초기화"></a>프록시 객체의 초기화</h4><ul>
<li><p>프록시 객체는 실제 사용될 때(ex-member.getName() 등) DB를 조회해 실제 엔티티 객체를 생성하는데 이것이 프록시 객체의 초기화이다.</p>
</li>
<li><p>예제</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Entity</span></span><br><span class="line"><span class="comment">// MemberProxy 반환</span></span><br><span class="line">Member member = em.getReference(Member.class, <span class="string">"id"</span>);</span><br><span class="line">member.getName(); <span class="comment">// (1) getName();</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Proxy</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberProxy</span> <span class="keyword">extends</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">  Member target = <span class="keyword">null</span>; <span class="comment">// 실제 엔티티 참조</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(target == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="comment">// (2) 초기화 (영속성 컨텍스트로) 요청</span></span><br><span class="line">      <span class="comment">// (3) DB 조회</span></span><br><span class="line">      <span class="comment">// (4) 실제 엔티티 생성 및 참조 보관</span></span><br><span class="line">      <span class="keyword">this</span>.target = ... ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (5) target.getName();</span></span><br><span class="line">    <span class="keyword">return</span> target.getName();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>(2) 실제 엔티티가 생성되어 있지 않으면 영속성 컨텍스트에 <code>엔티티 생성을 요청</code>하는데 이것을 <code>프록시 초기화</code>라 한다.</li>
<li>(3) 영속성 컨텍스트가 DB를 조회해 실제 엔티티 객체를 생성한다.</li>
<li>(4) 그리고 생성한 실제 엔티티 객체의 참조를 <code>target</code> 변수에 보관한다.</li>
</ul>
<br>

<h4 id="프록시의-특징-1"><a href="#프록시의-특징-1" class="headerlink" title="프록시의 특징"></a>프록시의 특징</h4><ul>
<li>처음 사용할 때 한 번만 초기화 된다.</li>
<li>프록시 객체를 초기화한다고해서 프록시 객체가 실제 엔티티로 바뀌는 것은 아니고, 프록시 객체 초기화 후 프록시 객체를 통해 실제 엔티티에 접근할 수 있는 것이다.</li>
<li>프록시 객체는 원본 엔티티를 상속받은 객체이므로 타입 체크 시 주의해서 사용해야한다.</li>
<li>영속성 컨텍스트에 찾는 엔티티가 이미 있다면 DB를 조회할 필요가 없으므로 <code>em.getReference()</code>를 호출해도 실제 엔티티를 반환한다.</li>
<li>초기화는 영속성 컨텍스트의 도움을 받아야 가능하기 때문에, <code>준영속 상태</code>의 프록시를 초기화하면 문제가 생긴다.<ul>
<li><code>org.hibernate.LazyInitializationException</code> Hibernate의 예외 발생</li>
</ul>
</li>
</ul>
<br>

<h4 id="준영속-상태와-초기화"><a href="#준영속-상태와-초기화" class="headerlink" title="준영속 상태와 초기화"></a>준영속 상태와 초기화</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MemberProxy 반환</span></span><br><span class="line">Member member = em.getReference(Member.class, <span class="string">"id"</span>);</span><br><span class="line">transaction.commit();</span><br><span class="line">em.close(); <span class="comment">// 영속성 컨텍스트 종료</span></span><br><span class="line"></span><br><span class="line">member.getName(); <span class="comment">// 준영속 상태 초기화 시도 &gt; 예외 발생</span></span><br></pre></td></tr></table></figure>

<br>

<h3 id="프록시와-식별자"><a href="#프록시와-식별자" class="headerlink" title="프록시와 식별자"></a>프록시와 식별자</h3><ul>
<li>Entity를 Proxy로 조회할 때 식별자(Primary Key)값을 파라미터로 전달한다. 이 때 프록시 객체는 이 식별자 값을 보관한다. 따라서 식별자 값을 조회하는 Entity.getId()를 호출해도 프록시를 초기화하지 않는다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Member member = em.getReference(Member.class, <span class="string">"id"</span>); <span class="comment">// 식별자 보관</span></span><br><span class="line">member.getId(); <span class="comment">// 초기화되지 않는다.</span></span><br></pre></td></tr></table></figure>

<ul>
<li>엔티티 접근 방식을 <code>@Access(AccessType.PROPERTY))</code>로 설정한 경우에만 초기화하지 않는다.</li>
<li>엔티티 접근 방식을 <code>@Access(AccessType.FIELD))</code>로 설정하면 id만 조회하는지 아닌지 구분할 수 없어서 프록시 객체를 초기화한다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Member member = em.find(Member.class, <span class="string">"member_id"</span>);</span><br><span class="line">Team team = em.getReference(Team.class, <span class="string">"team_id"</span>); <span class="comment">// sql을 실행하지 않는다.</span></span><br><span class="line">member.setTeam(team);</span><br></pre></td></tr></table></figure>

<br>

<h3 id="프록시-확인"><a href="#프록시-확인" class="headerlink" title="프록시 확인"></a>프록시 확인</h3><ul>
<li>JPA의 <code>PersistenceUnitUtil.isLoaded(Object entity)</code> 메소드를 사용하면 프록시 인스턴스 초기화 여부를 알 수 있다. 결과는 boolean 값이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isLoad = em.getEntityManager.Factory()</span><br><span class="line">                    .getPersistenceUnitUtil().isLoaded(entity);</span><br><span class="line"><span class="comment">// Or boolean isLoad = emf.getPersistenceUnitUtil.isLoaded(entity);</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"isLoad = "</span> + isLoad); <span class="comment">// 초기화 여부</span></span><br></pre></td></tr></table></figure>

<ul>
<li>조회한 엔티티가 프록시인지 아닌지 확인하려면 클래스명을 출력해보면된다. 클래스 명 뒤에 <code>..javassist..</code>가 있다면 프록시이다. 출력은 라이브러리에 따라 달라질 수 있다.</li>
</ul>
<br>

<h2 id="즉시-로딩과-지연-로딩"><a href="#즉시-로딩과-지연-로딩" class="headerlink" title="즉시 로딩과 지연 로딩"></a>즉시 로딩과 지연 로딩</h2><blockquote>
<p>member1이 team1에 소속되어 있는 경우</p>
</blockquote>
<h3 id="즉시-로딩"><a href="#즉시-로딩" class="headerlink" title="즉시 로딩"></a>즉시 로딩</h3><ul>
<li>엔티티를 조회할 때 연관된 엔티티도 함께 조회한다.</li>
<li>ex) <code>em.find(Member.class, &quot;member1&quot;);</code> 호출 시 회원 엔티티와 연관된 팀 엔티티도 함께 조회.</li>
<li>설정 : <code>@ManyToOne(fetch = FetchType.EAGER)</code></li>
</ul>
<br/>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="meta">@ManyToOne</span>(fetch = FetchType.EAGER)</span><br><span class="line">  <span class="meta">@JoinColumn</span>(name = <span class="string">"TEAM_ID"</span>)</span><br><span class="line">  <span class="keyword">private</span> Team team;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Member member = em.find(Member.class, <span class="string">"member1"</span>); <span class="comment">// (1)</span></span><br><span class="line">Team team = member.getTeam(); <span class="comment">// (2) 객체 그래프 탐색</span></span><br></pre></td></tr></table></figure>

<ul>
<li>(1) 회원을 조회하는 순간 팀도 함께 조회한다.</li>
<li>(1)(2) 쿼리를 여러번 실행하는 것이 아닌, 보통 최적화를 위해 <code>join</code>쿼리를 사용해 쿼리 한번에 두 엔티티를 조회한다.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  m.memeber_id <span class="keyword">as</span> member_id,</span><br><span class="line">  m.team_id <span class="keyword">as</span> team_id,</span><br><span class="line">  m.username <span class="keyword">as</span> username,</span><br><span class="line">  t.team_id <span class="keyword">as</span> team_id,</span><br><span class="line">  t.name <span class="keyword">as</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  <span class="keyword">member</span> m <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> team t <span class="comment">-- (1) outer join</span></span><br><span class="line">    <span class="keyword">on</span> m.team_id = t.team_id</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  m.member_id = <span class="string">'member1'</span></span><br></pre></td></tr></table></figure>

<h4 id="Null-제약-조건"><a href="#Null-제약-조건" class="headerlink" title="Null 제약 조건"></a>Null 제약 조건</h4><ul>
<li><p>현재 회원 테이블의 team_id 외래키에 null값이 허용되어 있기 때문에 외부 조인(outer join)을 사용한다.</p>
</li>
<li><p>최적화를 위해 내부 조인(inner join)을 사용하려면 외래키에 <code>not null</code> 제약 조건을 걸어야 한다.</p>
</li>
<li><p>그리고 JPA에 알려주는 설정을 해야한다.</p>
</li>
<li><p><code>@JoinColumn(nullable = true)</code> : null 허용, 외부 조인 사용, 기본값</p>
</li>
<li><p><code>@JoinColumn(nullable = false)</code> : null 허용하지 않음, 내부 조인 사용</p>
</li>
<li><p><code>@ManyToOne(fetch = FetchType.EAGER, optional = false)</code> : 이 설정도 내부 조인을 사용한다.</p>
</li>
</ul>
<blockquote>
<p>선택적 관계면 외부 조인, 필수 관계면 내부 조인을 사용</p>
</blockquote>
<br>

<h3 id="지연로딩"><a href="#지연로딩" class="headerlink" title="지연로딩"></a>지연로딩</h3><ul>
<li>연관된 엔티티를 실제 사용할 때 조회한다.</li>
<li>ex) <code>member.getTeam().getName()</code>과 같이 조회한 팀 엔티티를 실제 사용하는 시점에 JPA가 SQL을 호출해 팀 엔티티를 조회한다.</li>
<li>설정 : <code>@ManyToOne(fetch = FetchType.LAZY)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="meta">@ManyToOne</span>(fetch = FetchType.LAZY)</span><br><span class="line">  <span class="meta">@JoinColumn</span>(name = <span class="string">"team_id"</span>)</span><br><span class="line">  <span class="keyword">private</span> Team team;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Member member = em.find(Member.class, <span class="string">"member1"</span>); <span class="comment">// (1)</span></span><br><span class="line">Team team = member.getTeam(); <span class="comment">// (2) 객체 그래프 탐색</span></span><br><span class="line">team.getName(); <span class="comment">// (3) 팀 객체 실제 사용</span></span><br></pre></td></tr></table></figure>

<ul>
<li>(1)에서 회원 조회시 회원만 조회하고 회원의 팀 변수에(<code>Member.team</code>)에 프록시 객체를 넣는다.</li>
<li>(2)에서 반환하는 것은 프록시 객체이다.</li>
<li>이 프록시 객체가 실제 사용될 때(3)까지 데이터 로딩을 미룬다.</li>
<li>즉 데이터가 필요한 순간에 데이터베이스를 조회해서 프록시 객체를 초기화한다.</li>
</ul>
<br>

<ul>
<li>(1) 호출 시 실행되는 SQL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">member</span></span><br><span class="line"><span class="keyword">where</span> member_id = <span class="string">'member1'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>(3) 호출 시 실행되는 SQL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> team</span><br><span class="line"><span class="keyword">where</span> team_id = <span class="string">'team1'</span></span><br></pre></td></tr></table></figure>

<br>

<h2 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h2><ul>
<li>지연 로딩(Lazy Loading) : 연관된 엔티티를 프록시로 조회. 프록시를 실제 사용할 때 초기화하면서 DB를 조회한다.</li>
<li>즉시 로딩(Eager Loading) : 연관된 엔티티를 즉시 조회, Hibernate라면 가능한 SQL join을 사용해 한번에 조회한다.</li>
</ul>
<br>

<h3 id="지연-로딩의-활용"><a href="#지연-로딩의-활용" class="headerlink" title="지연 로딩의 활용"></a>지연 로딩의 활용</h3><h4 id="프록시와-컬렉션-래퍼"><a href="#프록시와-컬렉션-래퍼" class="headerlink" title="프록시와 컬렉션 래퍼"></a>프록시와 컬렉션 래퍼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Member member = em.find(Member.class, <span class="string">"member1"</span>);</span><br><span class="line">List&lt;Order&gt; orders = member.getOrders(); <span class="comment">// (1)</span></span><br><span class="line">System.out.println(<span class="string">"orders = "</span> + orders.getClass().getName()); <span class="comment">// (2)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Hibernate는 Entity를 영속 상태로 만들 때 Entity에 컬렉션이 있으면 컬렉션을 추적, 관리할 목적으로 원본 컬렉션을 Hibernate가 제공하는 내장 컬렉션으로 변경한다. 이를 컬렉션 래퍼라 한다.</p>
</li>
<li><p>(2)의 출력 결과는 <code>org.hibernate.collection.internal.PersistentBag</code>이다.</p>
</li>
<li><p>Entity 지연 로딩할 때는 프록시 객체를 사용해 지연 로딩을 수행한다. 하지만 컬렉션은 컬렉션 래퍼가 지연 로딩을 수행한다. 컬랙션 래퍼는 컬렉션에 대한 프록시 역할을 한다.</p>
</li>
<li><p>(1)을 호출해도 컬렉션이 초기화되지 않는다. <code>member.getOrders.get(0)</code>과 같이 실제 데이터를 조회할 때 DB에서 조회해서 초기화한다.</p>
</li>
</ul>
<br>

<h4 id="JPA-기본-Fetch-전략"><a href="#JPA-기본-Fetch-전략" class="headerlink" title="JPA 기본 Fetch 전략"></a>JPA 기본 Fetch 전략</h4><ul>
<li>@ManyToOne, @OneToOne : FetchType.EAGER</li>
<li>@OneToMany, @ManyToMany : FetchType.LAZY</li>
</ul>
<blockquote>
<p>기본적으로 연관된 엔티티가 하나면 즉시 로딩, 컬렉션이면 지연 로딩</p>
</blockquote>
<ul>
<li>개발 시 모든 연관관계에 지연 로딩을 사용하고, 앱 개발이 완료 단계가 되었을 때 실제 사용 상황을 보고 필요한 곳만 즉시 로딩을 사용하도록하는 것이 좋다.<ul>
<li>SQL을 직접 사용할 경우 이런식의 변경은 어렵다.</li>
</ul>
</li>
</ul>
<h4 id="컬렉션에-FetchType-EAGER-사용-시-주의점"><a href="#컬렉션에-FetchType-EAGER-사용-시-주의점" class="headerlink" title="컬렉션에 FetchType.EAGER 사용 시 주의점"></a>컬렉션에 FetchType.EAGER 사용 시 주의점</h4><ul>
<li>컬렉션을 하나 이상 즉시 로딩하는 것은 좋지 않다.</li>
<li>컬렉션 즉시 로딩은 항상 외부조인(outer join)을 사용한다.</li>
</ul>
<br>

<h4 id="기본-조인-전략-정리"><a href="#기본-조인-전략-정리" class="headerlink" title="기본 조인 전략 정리"></a>기본 조인 전략 정리</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- @ManyToOne, @OneToOne</span><br><span class="line">  - (optional = false) : inner join</span><br><span class="line">  - (optional = true) : outer join</span><br><span class="line">- @OneToMany, @ManyToMany</span><br><span class="line">  - (optional = false) : outer join</span><br><span class="line">  - (optional = true) : outer join</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>자바 ORM 표준 JPA 프로그래밍</li>
</ul>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-09T15:00:00.000Z">2018-11-10</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/test/">Test</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 726 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-11-10-jpa-junit-test/">JPA 테스트의 특징</a>
            
        </h1>
        <div class="content">
            <h2 id="JPA-TEST"><a href="#JPA-TEST" class="headerlink" title="JPA TEST"></a>JPA TEST</h2><p>JPA는 <code>엔티티 매핑</code> / <code>API 호출</code> 두 부분으로 나뉜다.  </p>
<ol>
<li>처음에는 객체가 어떻게 DB 테이블에 매핑되는지 정의한다.<ul>
<li>보통 자바 Annotation 이용</li>
</ul>
</li>
<li>다음으로 EntityManager 객체를 이용해 이 객체들을 DB에 저장하거나 읽어온다.<ul>
<li>JPA 쿼리를 사용해 객체를 만들고 지우고 전달하는 등의 작업</li>
</ul>
</li>
</ol>
<p>따라서 위의 두가지를 독립적으로 테스트해야 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 올바르게 매핑되었는지 검증하는 테스트.</span><br><span class="line">2. 영속 코드 자체(예-DAO 등)를 위한 단위 테스트.</span><br></pre></td></tr></table></figure>

<h2 id="임베디드-데이터베이스"><a href="#임베디드-데이터베이스" class="headerlink" title="임베디드 데이터베이스"></a>임베디드 데이터베이스</h2><p> 임베디드 데이터베이스의 경우 애플리케이션이 사용할 데이터베이스와 100% 호환이 되지 않을 수있다는 단점이 있다. 하지만 JPA를 사용하면 일반적인 경우 호환성에 문제가 생기진 않는다. JPA 벤더가 SQL 코드를 생성하기 때문이다. <strong>따라서 단위 테스트에 임베디드 데이터베이스(H2 등)을 사용하는 것이 좋다.</strong><br> 프로젝트는 기본적으로 임베디드 데이터베이스를 사용하고, 데이터베이스를 쉽게 변경 가능하도록 만드는 것이 좋다. 개발자는 임베디드데이터베이스를 이용하고 공식 빌드에서 실제 DB로 교체하는 등으로 사용한다.</p>
<h2 id="위임-수준-commitment-level"><a href="#위임-수준-commitment-level" class="headerlink" title="위임 수준(commitment level)"></a>위임 수준(commitment level)</h2><h3 id="JPA-연산의-특징"><a href="#JPA-연산의-특징" class="headerlink" title="JPA 연산의 특징"></a>JPA 연산의 특징</h3><ul>
<li>트랜잭션 안에서 발생</li>
<li>보통 벤더별로 특화된 세션으로 전이됨</li>
<li>트랜잭션과 세션 생명주기 관리에 의존적임</li>
<li>객체는 캐싱되고, 새로운 SQL명령은 지연관계 설정 시마다 발행.</li>
</ul>
<h3 id="트랜잭션-커밋-방식"><a href="#트랜잭션-커밋-방식" class="headerlink" title="트랜잭션 커밋 방식"></a>트랜잭션 커밋 방식</h3><ul>
<li>비용이 비쌈</li>
<li>DB를 영구적으로 변경시킴.</li>
</ul>
<h3 id="트랜잭션-롤백-방식"><a href="#트랜잭션-롤백-방식" class="headerlink" title="트랜잭션 롤백 방식"></a>트랜잭션 롤백 방식</h3><ul>
<li>따라서 테스트 케이스의 tearDown 도중에 트랜잭션을 롤백한다.</li>
<li>많은 프레임워크가 이 방식을 따름(Spring의 TestContext 등)</li>
</ul>
<br/>
하지만 임베디드 데이터베이스를 사용한다면 트랜잭션 커밋 방식을 사용해도 괜찮다.

<hr>
<ul>
<li>임베디드 데이터 베이스는 속도가 빠르다. 매번 전체 DB를 새로 만들어도 괜찮을 정도.</li>
<li>필요하면 tearDown 중 데이터베이스를 정리할 수 있다. 임베디드 DB에선 저렴한 연산.</li>
<li>트랜잭션을 롤백하면 JPA 벤더가 DB 실제 SQL을 전송하지 않을 수 있다.<ul>
<li>이 경우 테스트 케이스는 통과하지만 실제 환경에서 실패하게 된다.</li>
</ul>
</li>
<li>JPA 트랜잭션이나 세션 밖에서 영구 저장된 객체의 동작을 테스트해보길 원할경우 사용할 수 있다.</li>
</ul>
<hr>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li>Junit in Action</li>
</ul>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-09-23T15:00:00.000Z">2018-09-24</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/test/">Test</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 514 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-09-24-refactoring-and-tdd/">Refactoring과 Test/TDD</a>
            
        </h1>
        <div class="content">
            <h2 id="리팩토링이란"><a href="#리팩토링이란" class="headerlink" title="리팩토링이란 ?"></a>리팩토링이란 ?</h2><p>중복을 제거하고 읽기 좋은 코드를 구현하기 위해 구조를 변경하는 것.<br>소스코드의 가독성을 높이고 유지보수를 편하게 하기 위해서 소스코드의 구조를 변경하는 것. 기능상의 결과가 변경되는 것은 아니다.</p>
<h3 id="3원칙을-생각하면서-리팩토링을-연습하자"><a href="#3원칙을-생각하면서-리팩토링을-연습하자" class="headerlink" title="3원칙을 생각하면서 리팩토링을 연습하자"></a>3원칙을 생각하면서 리팩토링을 연습하자</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 메소드는 한 가지 책임만 가지도록 구현</span><br><span class="line">2. 인덴트 깊이를 1단계로 유지</span><br><span class="line">3. else를 사용하지 마라</span><br></pre></td></tr></table></figure>

<ul>
<li>복잡도가 쉽게 증가하는 원인 : 요구사항의 복잡도가 높은 것이 가장 큰 원인.  <ul>
<li>리팩토링을 통해 소스코드를 깔끔하게 구현하는 연습을 함으로써 낮춘다.</li>
</ul>
</li>
</ul>
<h3 id="리팩토링-과정"><a href="#리팩토링-과정" class="headerlink" title="리팩토링 과정"></a>리팩토링 과정</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 요구사항을 작은 단위로 나누어 구현가능한 상태로 만드는 작업</span><br><span class="line">2. 하나의 요구사항을 완료한 뒤 리팩토링을 하고 넘어갈 것.</span><br><span class="line">  - 구현 -&gt; 테스트를 통한 결과 확인 -&gt; 리팩토링</span><br></pre></td></tr></table></figure>

<h3 id="테스트"><a href="#테스트" class="headerlink" title="테스트"></a>테스트</h3><ul>
<li>테스트 코드가 있다면, 리팩토링을 통해 프로덕션 코드를 변경하더라도 테스트 코드를 통해 바로 검증할 수 있다.</li>
<li>따라서 리팩토링을 통해 소스코드를 개선하려면 테스트코드가 있어야한다. 테스트와 리팩토링을 함께 연습하는 것이 중요하다.</li>
</ul>
<h3 id="추가-학습"><a href="#추가-학습" class="headerlink" title="추가 학습"></a>추가 학습</h3><ul>
<li>TDD를 바로 연습하는 것도 좋지만, 우선 JUnit으로 테스트를 검증하는 방식으로 진행하다가 도전해보자.</li>
<li>TDD와 리팩토링을 연습할 때 외부 의존관계가 많은 코드(웹 UI, DB 연결된 코드 등)부터 하기보다는 이전에 구현해봤던 기능이나, 외부 의존관계가 없는 코드부터 시작하는 것이 좋다.</li>
<li>연습하기 가장 좋은 코드는 알고리즘이나 유틸리티 성격의 코드이다.</li>
</ul>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-09-10T15:00:00.000Z">2018-09-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/spring/">Spring</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 182 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-09-11-import-project-from-sts-after-git-pull-clone-in-cli/">STS - CLI 환경에서 git pull/clone 후 STS에서 프로젝트 import 하기</a>
            
        </h1>
        <div class="content">
            <ul>
<li>Mac Terminal에서 기존 프로젝트 git Clone</li>
<li>이후 STS에서 프로젝트 import</li>
<li>프로젝트 import 이후 프로젝트 실행 안되는 경우</li>
</ul>
<h2 id="CLI-환경에서-Git-Clone-후-STS에서-프로젝트-import-하기"><a href="#CLI-환경에서-Git-Clone-후-STS에서-프로젝트-import-하기" class="headerlink" title="CLI 환경에서 Git Clone 후 STS에서 프로젝트 import 하기"></a>CLI 환경에서 Git Clone 후 STS에서 프로젝트 import 하기</h2><p>clone 한 프로젝트 상위 폴더에서 STS 실행 -&gt; [Package Explorer] 우클릭 -&gt; [import] -&gt; [General]-[Projects from Folder or Archive] -&gt; 프로젝트 폴더 선택</p>
<h2 id="import-후-Server에서-프로젝트-인식이-안되는-경우"><a href="#import-후-Server에서-프로젝트-인식이-안되는-경우" class="headerlink" title="import 후 Server에서 프로젝트 인식이 안되는 경우"></a>import 후 Server에서 프로젝트 인식이 안되는 경우</h2><ul>
<li>Server 우클릭 -&gt; [Add and Remove]<img width="302" src="/images/2018-09-11/01.png">

</li>
</ul>
<p>-&gt; [there are no resources that can be added or removed from the server] error<br><img width="516" src="/images/2018-09-11/02.png"></p>
<br>

<blockquote>
<p>프로젝트가 웹 프로젝트가 아니기 때문, 따라서 프로젝트 설정을 변경해주어야 함.</p>
</blockquote>
<br>

<ul>
<li>프로젝트 우클릭 -&gt; [Properties]<img width="298" src="/images/2018-09-11/03.png">

</li>
</ul>
<p>-&gt; [Project Facets] -&gt; Dynamic Web Module, Java, Javascript 선택 -&gt; aplly<br><img width="781" src="/images/2018-09-11/04.png"></p>
<br/>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-31T15:00:00.000Z">2018-06-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/netty/">Netty</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 minutes read (About 2403 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-06-01-netty-embeddedchannel-unittest/">Netty EmbeddedChannel 이용한 단위 테스트</a>
            
        </h1>
        <div class="content">
            <h3 id="단위-테스트란"><a href="#단위-테스트란" class="headerlink" title="단위 테스트란?"></a>단위 테스트란?</h3><blockquote>
<p>다른 모듈이나 데이터베이스 및 네트워크 등 런타임 의존성으로부터 최대한 격리된 가능한 작은 크기의 코드로 테스트하는 것. 테스트를 통해 모든 단위가 정상적으로 작동하는 것을 확인하면 문제가 생겼을 때 원인을 찾기가 수월해진다.</p>
</blockquote>
<p>Netty에서는 ChannelHandler가 아주 중요한 요소이다. 네티에서는 <code>EmbeddedChannel</code>을 통해 ChannelHandler의 단위 테스트를 제공한다.</p>
<p>테스트하는 코드 모듈이나 단위를 보통 런타임 환경 밖에서 실행되므로 이를 실행하기 위한 프레임 워크나 도구가 필요하다. 여기서는 JUnit을 통해 테스트 해본다.</p>
<br/>

<h2 id="EmbeddedChannel"><a href="#EmbeddedChannel" class="headerlink" title="EmbeddedChannel"></a>EmbeddedChannel</h2><p><code>EmbeddedChannel</code>은 인바운드 또는 아웃바운드 데이터를 EmbeddedChannel에 기록하고 <code>ChannelPipeline</code> 끝에 도달하는 항목이 있는지 확인한다. 이를 통해 메세지가 인코딩 또는 디코딩 됐는지 확인할 수 있고 트리거 된 <code>ChannelHandler</code> 작업이 있는지 여부도 알 수 있다.</p>
<ul>
<li>EmbeddedChannel 주요 메소드</li>
</ul>
<table>
<thead>
<tr>
<th>이름</th>
<th>역할</th>
</tr>
</thead>
<tbody><tr>
<td>writeInbound(Object… msgs)</td>
<td>EmbeddedChannel에 인바운드 메세지를 기록한다. EmbeddedChannel에서 readInbound()를 통해 데이터를 읽을 수 있는 경우 true 반환</td>
</tr>
<tr>
<td>readInbound()</td>
<td>EmbeddedChannel에서 인바운드 메세지 읽는다. 반환되는 항목은 전체 ChannelPipeline을 통과한 것. 읽을 데이터가 없으면 null 반환</td>
</tr>
<tr>
<td>writeOutbound(Object… msgs)</td>
<td>EmbeddedChannel에 아웃바운드 메세지를 기록한다. EmbeddedChannel에서 readOutbound()를 통해 데이터를 읽을 수 있는 경우 true를 반환</td>
</tr>
<tr>
<td>writeInbound()</td>
<td>EmbeddedChannel에서 아웃바운드 메세지를 읽음 반환되는 항목은 전체 ChannelPipeline을 통과한 것. 읽을 항목이 없으면 null 반환</td>
</tr>
<tr>
<td>finish</td>
<td>EmbeddedChannel을 완료로 표시하고 전체 인바운드 또는 아웃바운드 데이터를 읽을 수 있는 경우 true를 반환한다. 이 메소드는  EmbeddedChannel의 close()를 호출함</td>
</tr>
</tbody></table>
<ul>
<li>EmbeddedChannel 데이터 흐름</li>
</ul>
<img alt="EmbeddedChannel" src="/images/2018-06-01/01.jpg">

<p>인바운드 데이터는 <code>ChannelInboundHandler</code>에 의해 처리되고 원격 피어에서 읽은 데이터를 나타낸다. 아웃바운드 데이터는 <code>ChannelOutboundHandler</code>에 의해 처리되고 원격 피어에 기록된 데이터를 나타낸다. 테스트하는 <code>ChannelHandler</code>를 어떻게 구성하느냐에 따라 구체적인 코드는 달라질 수 있다.  </p>
<p>[그림]은 <code>EmbeddedChannel</code>의 메소드를 이용해 <code>ChannelPipeline</code>에서의 데이터 흐름을 보여준다. 메세지를 <code>Channel</code>에 기록하고 아웃바운드 방향으로 <code>ChannelPipeline</code>을 통과시키는데 <code>writeOutbound()</code>를 이용한다. 그리고 다음 처리된 메세지를 읽고 예상한 결과가 나왔는지 확인하는 데는 <code>readOutbound()</code>를 이용한다. 인바운드 데이터를 테스트할 때는 반대로 사용하면 된다. (<code>xxxInboud</code>)  </p>
<p>메세지는 <code>ChannelPipeline</code>을 통과하고 해당하는 <code>ChannelInboundHandler</code>나 <code>ChannelOutboundHandler</code>를 통해 처리되는데 메세지가 소비되지 않은 경우 메세지가 처리된 후 <code>readInbound()</code>나 <code>readOutbound()</code>를 통해 이용해 <code>Channel</code>에서 읽을 수 있다.  </p>
<br/>

<h2 id="EmbeddedChannel을-이용한-ChannelHandler-테스트"><a href="#EmbeddedChannel을-이용한-ChannelHandler-테스트" class="headerlink" title="EmbeddedChannel을 이용한 ChannelHandler 테스트"></a>EmbeddedChannel을 이용한 ChannelHandler 테스트</h2><p>JUnit과 EmbeddedChannel을 이용해 ChannelHandler를 테스트 해보자  </p>
<h3 id="Junit-Assert"><a href="#Junit-Assert" class="headerlink" title="Junit Assert"></a>Junit Assert</h3><blockquote>
<p><code>org.junit.Assert</code> 클래스에는 테스트에 이용되는 여러 정적 메소드가 들어있다. 어설션이 실패하면 예외가 발생하고 현재 실행중인 테스트가 종료된다. 다음 import 문으로 사용할 수 있다. <code>import static org.junit.Assert.*;</code> 그리고 다음부터는 직접 Assert 메소드를 호출할 수 있다. <code>assertEquals(buf.readSlice(3), read);</code></p>
</blockquote>
<br/>

<h3 id="인바운드-메세지-테스트"><a href="#인바운드-메세지-테스트" class="headerlink" title="인바운드 메세지 테스트"></a>인바운드 메세지 테스트</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedLengthFrameDecoder</span> <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 인바운드 바이트를 처리하고 이를 메세지로 디코딩하기 위해서</span></span><br><span class="line">  <span class="comment">// ByteToMessageDecoder를 상속 받음</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> frameLength;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">FixedLengthFrameDecoder</span><span class="params">(<span class="keyword">int</span> frameLength)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 생성할 프레임의 길이 지정</span></span><br><span class="line">    <span class="keyword">if</span>(frameLength &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">        <span class="string">"frameLength must be a positive integer:"</span>+frameLength);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.frameLength = frameLength;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="comment">// 다음 프레임을 처리하는 데 충분하게 바이트를 읽을 수 있는지 확인</span></span><br><span class="line">      <span class="keyword">while</span> (in.readableBytes() &gt;= frameLength) &#123;</span><br><span class="line">        ByteBuf buf = in.readBytes(frameLength);</span><br><span class="line">        <span class="comment">// ByteBuf에서 새로운 프레임을 읽음</span></span><br><span class="line">        out.add(buf);</span><br><span class="line">        <span class="comment">// 디코딩 된 메세지의 List에 프레임을 추가함</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ByteToMessageDecoder</code>는 고정된 3바이트의 프레임을 생성한다. 이 코드는 데이터가 충분히 있는 경우 고정 크기의 프레임을 생성한다. 반면에 읽을 데이터가 충분하지 않으면 다음 데이터를 기다린다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedLengthFrameDecoderTest</span></span>&#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="comment">//JUnit이 메소드를 실행하도록 @Test 어노테이션을 지정해줌</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFrameDecoded</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ByteBuf buf = Unpooled.buffer();</span><br><span class="line">    <span class="comment">// ByteBuf를 생성하고 9바이트 저장</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">9</span>; i++)&#123;</span><br><span class="line">      buf.writeByte(i);</span><br><span class="line">    &#125;</span><br><span class="line">    ByteBuf input = buf.duplicate();</span><br><span class="line">    EmbeddedChannel channel = <span class="keyword">new</span> EmbeddedChannel(</span><br><span class="line">      <span class="keyword">new</span> FixedLengthFrameDecoder(<span class="number">3</span>));</span><br><span class="line">      <span class="comment">// EmbeddedChannel을 생성하고 3바이트 길이의 프레임으로 테스트할</span></span><br><span class="line">      <span class="comment">// FixedLengthFrameDecoder를 추가함</span></span><br><span class="line">    assertTrue(channel.writeInbound(input.retain()));</span><br><span class="line">    <span class="comment">// EmbeddedChannel에 바이트를 기록</span></span><br><span class="line">    assertTrue(channel.finish());</span><br><span class="line">    <span class="comment">// Channel을 완료로 표시</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 처리된 메세지를 읽고 각각 3바이트 프레임이 3개인지 확인함</span></span><br><span class="line">    ByteBuf read = (ByteBuf) channel.readInbound();</span><br><span class="line">    assertEquals(buf.readSlice(<span class="number">3</span>), read);</span><br><span class="line">    read.release();</span><br><span class="line"></span><br><span class="line">    read (ByteBuf) channel.readInbound();</span><br><span class="line">    assertEquals(buf.readSlice(<span class="number">3</span>),read);</span><br><span class="line">    read.release();</span><br><span class="line"></span><br><span class="line">    read = (ByteBuf) channel.readInbound();</span><br><span class="line">    assertEquals(buf.readSlice(<span class="number">3</span>), read);</span><br><span class="line">    read.release();</span><br><span class="line"></span><br><span class="line">    assertNull(channel.readInbound());</span><br><span class="line">    buf.release();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>testFrameDecoded()</code> 메소드는 읽을 수 있는 9바이트를 포함하는 ByteBuf 1개가 3바이트를 포함하는 ByteBuf 3개로 디코딩되는지 확인한다. 그리고 <code>writeInbound()</code>를 한번 호출해 ByteBuf는 읽기 가능한 9바이트로 채운다. 그 다음에 finish()를 실행해 EmbeddedChannel을 완료로 표시하고 마지막으로 <code>readInbound()</code>를 호출해 EmbeddedChannel에서 프레임 3개와 null 1개를 읽었다.</p>
<br/>

<h3 id="아웃바운드-메세지-테스트"><a href="#아웃바운드-메세지-테스트" class="headerlink" title="아웃바운드 메세지 테스트"></a>아웃바운드 메세지 테스트</h3><p>아웃바운드 메세지 테스트도 인바운드와 비슷하다. <code>ChannelOutboundHandler</code>는 메세지를 다른 포맷으로 변환하는 컴포넌트인 인코더 역할을 한다. 아래의 코드로 테스트 해보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsIntegerEncoder</span> <span class="keyword">extends</span> <span class="title">MessageToMessageEncoder</span>&lt;<span class="title">ByteBuf</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// MessageToMessageEncoder를 상속받아 메세지를 다른 포맷으로 인코딩 함</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">encode</span><span class="params">(ChannelHandlerContext channelHandlerContext,</span></span></span><br><span class="line"><span class="function"><span class="params">    ByteBuf in, List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(in.readableBytes() &gt;= <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="comment">// 인코딩할 바이트가 충분한지 확인</span></span><br><span class="line">        <span class="keyword">int</span> value = Math.abs(in.readint());</span><br><span class="line">        <span class="comment">// ByteBuf에서 다음 int를 읽고 절대값을 계산</span></span><br><span class="line">        out.add(value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsIntegerEncoderTest</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testEncoded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ByteBuf buf = Unpooled.buffer();</span><br><span class="line">    <span class="comment">// ByteBuf를 생성하고 음의 정수 9개 기록</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">      buf.writeInd(i * -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    EmbeddedChannel channel = <span class="keyword">new</span> EmbeddedChannel(</span><br><span class="line">      <span class="keyword">new</span> AbsIntegerEncoder());</span><br><span class="line">      <span class="comment">// EmbeddedChannel을 생성하고 테스트할 AbsIntegerEncoder를 추가</span></span><br><span class="line">    assertTrue(channel.writeOutbound(buf));</span><br><span class="line">    <span class="comment">// ByteBuf를 기록하고 readOutbound()가 데이터를 생성하는지 확인</span></span><br><span class="line">    assertTrue(channel.finish());</span><br><span class="line">    <span class="comment">// Channel을 완료로 표시</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 생성된 값을 읽고 절댓 값을 포함하는지 확인</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">      assertEquals(i, channel.readOutbound());</span><br><span class="line">    &#125;</span><br><span class="line">    assertNull(channel.readOutbound());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><code>ByteBuf</code>에 4바이트 음의 정수를 기록한다.</li>
<li><code>EmbeddedChannel</code>을 생성하고 여기에 <code>AbsIntegerEncoder</code>를 할당한다.</li>
<li><code>EmbeddedChannel</code>의 <code>writeOutbound()</code>를 호출해 ByteBuf를 기록한다.</li>
<li><code>Channel</code>을 완료로 표시한다.</li>
<li><code>EmbeddedChannel</code>의 아웃바운드 쪽에서 모든 정수를 읽고 절대값만 생성됐는지 확인한다.</li>
</ol>
<br/>

<h2 id="예외-처리-테스트"><a href="#예외-처리-테스트" class="headerlink" title="예외 처리 테스트"></a>예외 처리 테스트</h2><p>데이터 변환외에도 입력이 잘못되거나 데이터가 너무 많은 경우 적절하게 처리해야할 필요가 있다 이런 경우 예외 처리를 따로 해줄 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FrameChunkDecoder</span> <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 인바운드 바이트를 메세지로 디코딩하기 위해 ByteToMessageDecoder를 상속 받음</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> maxFrameSize;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">FrameChunkDecoder</span><span class="params">(<span class="keyword">int</span> maxFrameSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.maxFrameSize = maxFrameSize;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> readableBytes = in.readableBytes();</span><br><span class="line">      <span class="comment">// 생성할 프레임의 최대 허용 길이를 지정</span></span><br><span class="line">      <span class="keyword">if</span> (readableBytes &gt; maxFrameSize) &#123;</span><br><span class="line">        <span class="comment">// 프레임이 너무 큰 경우 폐기하고 TooLongFrameException을 생성함</span></span><br><span class="line">        in.clear();</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> TooLongFrameException();</span><br><span class="line">      &#125;</span><br><span class="line">      ByteBuf buf = in.readBytes(readableBytes);</span><br><span class="line">      <span class="comment">// 그렇지 않은 경우 ByteBuf로부터 새 프레임을 읽음</span></span><br><span class="line">      out.add(buf);</span><br><span class="line">      <span class="comment">// 디코딩된 메세지의 List에 프레임을 추가</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>생성할 프레임의 최대 허용 길이를 설정하고 프레임의 크기가 이것을 넘어갈 경우 초과하는 바이트가 폐기되고 <code>TooLongFrameException</code>이 발생한다. 이 예외는 파이프라인의 <code>다른 ChannelHandler</code>에서 <code>exceptionCaught()</code>를 이용해 처리하거나 무시할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FrameChunkDecoderTest</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFrameDecoded</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ByteBuf buf = Unpooled.buffer();</span><br><span class="line">    <span class="comment">// ByteBuf를 생성하고 9바이트를 기록</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">9</span>; i++)&#123;</span><br><span class="line">      buf.writeByte(i);</span><br><span class="line">    &#125;</span><br><span class="line">    ByteBuf input = buf.duplicate();</span><br><span class="line"></span><br><span class="line">    EmbeddedChannel channel = <span class="keyword">new</span> EmbeddedChannel(</span><br><span class="line">      <span class="keyword">new</span> FrameChunkDecoder(<span class="number">3</span>));</span><br><span class="line">      <span class="comment">// EmbeddedChannel을 생성하고 프레임 크기가 3인</span></span><br><span class="line">      <span class="comment">// FixedLengthFrameDecoder를 추가</span></span><br><span class="line"></span><br><span class="line">    assertTrue(channel.writeInbound(input.readBytes(<span class="number">2</span>)));</span><br><span class="line">    <span class="comment">// 2바이트를 기록한 후 새로운 프레임이 생성되는지 확인</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      channel.writeInbound(input.readBytes(<span class="number">4</span>));</span><br><span class="line">      <span class="comment">// 4바이트 프레임을 기록하고 예상되는 TooLongFrameException을 포착</span></span><br><span class="line">      Assert.fail();</span><br><span class="line">      <span class="comment">// 예외가 발생하지 않은 경우 이 메소드가 적용되고 테스트가 실패함</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (TooLongFrameException e)&#123;</span><br><span class="line">      <span class="comment">// 예상된 예외</span></span><br><span class="line">    &#125;</span><br><span class="line">    assertTrue(channel.writeInbound(input.readBytes(<span class="number">3</span>)));</span><br><span class="line">    <span class="comment">// 남은 2바이트를 기록하고 프레임이 올바른지 확인</span></span><br><span class="line">    assertTrue(channel.finish());</span><br><span class="line">    <span class="comment">// Channel을 완료로 표시</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 생성된 메세지를 읽고 값을 확인함</span></span><br><span class="line">    ByteBuf read = (ByteBuf) channel.readInbound();</span><br><span class="line">    assertEquals(buf.readSlice(<span class="number">2</span>), read);</span><br><span class="line">    read.release();</span><br><span class="line"></span><br><span class="line">    read = (ByteBuf) channel.readInbound();</span><br><span class="line">    assertEquals(buf.skipBytes(<span class="number">4</span>).readSlice(<span class="number">3</span>), read);</span><br><span class="line">    read.release();</span><br><span class="line">    buf.release();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 코드의 <code>try/catch</code> 블록은 EmbeddedChannel에서 특수하게 작용한다. <code>wrtie*</code> 메소드 중 하나에서 확인된 Exception이 발생하는 경우 이 <code>Exception</code>이 <code>RuntimeException</code>에 래핑된다. 이 방법을 데이터를 처리하는 동안 Exception이 처리됐는지 여부를 쉽게 테스트 할 수 있다. 그리고 이 테스트 방법은 <code>Exception</code>을 생성하는 모든 <code>ChannelHandler</code> 구현에 이용할 수 있다.</p>
<hr>
<ul>
<li>참고 서적<ul>
<li>네티 인 액션</li>
</ul>
</li>
</ul>
<br/>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-31T15:00:00.000Z">2018-06-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/server/">Server</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/server/netty/">Netty</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    23 minutes read (About 3378 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018-06-01-netty-codec-framework/">Netty Codec Framework</a>
            
        </h1>
        <div class="content">
            <h3 id="코덱이란"><a href="#코덱이란" class="headerlink" title="코덱이란?"></a>코덱이란?</h3><blockquote>
<p>모든 어플리케이션은 네트워크 상에 원시 바이트를 주고 받는다. 바이트 형태의 데이터를 대상 어플리케이션에 맞는 데이터 포맷으로 분석하고 변환하는 것이 필요하다. 이러한 데이터 변환은 인코더와 디코더로 구성된 코덱에 의해 처리된다.</p>
</blockquote>
<blockquote>
<p>일반적으로 동영상 압축 알고리즘을 코덱이라고 부른다. 예를 들면 MPEG 알고리즘으로 압축된 동영상을 재생한다면, 원본 동영상을 MPEG 알고리즘으로 압축하고 시청자는 다시 MPEG 디코더로 압축 해제한 뒤 시청을 할 것 이다.</p>
</blockquote>
<br/>

<h2 id="디코더-Decoder"><a href="#디코더-Decoder" class="headerlink" title="디코더(Decoder)"></a>디코더(Decoder)</h2><p>디코더는 네트워크 스트림을 프로그램의 메세지 포맷으로 변환한다. 즉 인바운드 데이터를 처리한다. 디코더는 인바운드 데이터를 다른 포맷으로 변환하는 일을 하므로 <code>ChannelInboundHandler</code>를 상속받는다.  </p>
<ul>
<li>Netty의 디코더 클래스<ul>
<li><code>ByteToMessageDecoder</code> / <code>ReplayingDecoder</code> : 바이트 스트림을 메세지로 디코딩</li>
<li><code>MessageToMessageDecoder</code> : 메세지를 다른 메세지 유형으로 디코딩</li>
</ul>
</li>
</ul>
<h3 id="메세지란"><a href="#메세지란" class="headerlink" title="메세지란 ?"></a>메세지란 ?</h3><blockquote>
<p>특정 어플리케이션에서 의미가 있는 바이트의 시퀀스 구조를 메세지라고 한다. 인코더의 경우 이 메세지를 전송하기에 적합한 (보통 바이트 스트림) 형식으로 변환하고, 디코더는 네트워크 스트림을 다시 프로그램의 메세지 포맷으로 변환한다.</p>
</blockquote>
<p>디코더는 인바운드 데이터를 <code>ChannelPipeline</code>의 다음 <code>ChannelInboundHandler</code>를 위해 변환할 때 이용한다. ChannelPipeline은 설계 방식이 체인 형태이기 때문에 복잡한 논리도 여러 디코더를 체인으로 연결해서 쉽게 구현할 수 있다.</p>
<br/>

<h3 id="ByteToMessageDecoder"><a href="#ByteToMessageDecoder" class="headerlink" title="ByteToMessageDecoder"></a>ByteToMessageDecoder</h3><p>바이트 스트림을 메세지(또는 다른 바이트의 시퀀스)로 디코딩 하는 일반적인 작업을 지원하는 추상 기본 클래스. 원격 피어가 완성된 메세지를 한번에 보낼지 알 수 없으므로 이 클래스는 인바운드 데이터가 처리할 만큼 모일 때까지 버퍼에 저장한다.</p>
<ul>
<li>ByteToMessageDecoder API</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>decode(ChannelHandlerContext ctx, ByteBuf in, List<Obejct> out)</td>
<td>decode()는 구현해야하는 유일한 추상 메소드로 들어오는 데이터가 포함된 ByteBuf와 디코딩된 메세지가 추가될 List를 받는다. 이 호출은 더 이상 List에 추가할 항목이 없거나 ByteBuf에 읽을 바이트가 없을 때까지 반복된다. 그 이후 List가 비어있지 않은 경우 그 내용이 파이프라인의 다음 핸들러로 전달된다.</td>
</tr>
<tr>
<td>decodeLast(ChannelHandlerContext ctx, ByteBuf in, List<Object> out)</td>
<td>네티가 제공하는 기본 구현은 단순히 decode()를 호출한다. 이 메소드는 Channel이 비활성화될 때 한번 호출된다. 특별한 처리가 필요한 경우 이 메소드를 재정의한다.</td>
</tr>
</tbody></table>
<ul>
<li>ByteToMessageDecoder를 상속받은 ToIntegerDecoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ToIntegerDecoder</span> <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 바이트를 특정 포맷으로 디코딩하기 위해서 ByteToMessageDecoder를 상속받음</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(in.readableBytes() &gt;= <span class="number">4</span>)&#123;</span><br><span class="line">        <span class="comment">// 최소 4바이트(int 길이)를 읽을 수 있는지 확인</span></span><br><span class="line">        out.add(in.readInt());</span><br><span class="line">        <span class="comment">// 인바운드 ByteBuf에서 int 하나를 읽고 이를 디코딩된 메세지의 List에 추가</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>int를 포함하는 바이트 스트림을 받고 각각 별도로 처리하는 경우, 인바운드 <code>ByteBuf</code>에서 각 int를 읽고 이를 파이프라인의 다음 <code>ChannelInboundHandler</code>로 전달해야한다. 위의 예제는 인바운드 <code>ByteBuf</code>에서 4바이트씩 읽고 이를 int로 디코딩한 후 List로 추가한다. 그리고 List에 추가할 항목이 더 이상 없는 경우 그 내용을 다음 <code>ChannelInboundHandler</code>로 전달한다. 위의 예제는 <code>readableBytes</code> 메소드로 <code>ByteBuf</code>에 읽을 데이터가 있는지 확인하는 과정이 필요하다.</p>
<br/>

<h3 id="ReplayingDecoder"><a href="#ReplayingDecoder" class="headerlink" title="ReplayingDecoder"></a>ReplayingDecoder</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ReplayingDecoder</span>&lt;<span class="title">S</span>&gt; <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span></span></span><br></pre></td></tr></table></figure>

<p><code>ReplayingDecoder</code>는 <code>ByteToMessageDecoder</code>를 상속받으며 위의 예제와 다르게 약간의 오버헤드를 감수하고 <code>readableBytes</code>를 호출할 필요를 없애준다. 이를 위해 들어오는 <code>ByteBuf</code>를 커스텀 ByteBuf 구현인 <code>ReplayingDecoderBuffer</code>로 래핑하는데 이 동작은 내부적으로 호출이 수행된다.</p>
<ul>
<li>ReplayingDecoder를 상속받은 ToIntegerDecoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ToIntegerDecoder</span> <span class="keyword">extends</span> <span class="title">ReplayingDecoder</span>&lt;<span class="title">Void</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// 바이트 스트림을 메세지로 디코딩하기 위해 ReplayingDecoder&lt;Void&gt;를 상속받음</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">  // 들어오는 ByteBuf는 ReplayingDecoderBuffer이다.</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      out.add(in.readInt());</span><br><span class="line">      <span class="comment">// 인바운드 ByteBuf에서 int 하나를 읽고 이를 디코딩된 메세지의 List에 추가함</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ReplayingDecoder의 특징<ul>
<li>모든 ByteBuf 작업이 지원되는 것은 아니다.<br>지원되지 않는 메소드를 호출하면  <code>UnsupportedOperationException</code>이 발생한다.</li>
<li><code>ReplayingDecoder</code>는 <code>ByteToMessageDecoder</code>보다 약간 느리다</li>
</ul>
</li>
</ul>
<br/>

<h3 id="MessageToMessageDecoder"><a href="#MessageToMessageDecoder" class="headerlink" title="MessageToMessageDecoder"></a>MessageToMessageDecoder</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageToMessageDecoder</span>&lt;<span class="title">I</span>&gt;</span></span><br><span class="line"><span class="class">  <span class="keyword">extends</span> <span class="title">ChannelInboundHandlerAdapter</span></span></span><br></pre></td></tr></table></figure>

<p>메세지 포맷을 변환하는 클래스이다. 예를 들면 POJO의 한 형식에서 다른 형식으로 바꾸는 등에 이용할 수 있다. 위의 형태에서 매개변수 I는 구현해야하는 유일한 메소드인 <code>decode()</code>에 입력 msg 인수의 형식을 알려준다.</p>
<ul>
<li>MessageToMessageDecoder API</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>decode(ChannelHandlerContext ctx, I msg, List<Object> out)</td>
<td>인바운드 메세지를 다른 포맷으로 디코딩할 때마다 호출된다. 디코딩된 메세지는 파이프라인의 다음 ChannelInboundHandler로 전달된다.</td>
</tr>
</tbody></table>
<ul>
<li>IntegerToStringDecoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerToStringDecoder</span> <span class="keyword">extends</span> <span class="title">MessageToMessageDecoder</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, Integer msg,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      out.add(String.valueOf(msg));</span><br><span class="line">      <span class="comment">//Integer 메세지를 String 표현으로 변환한 후 출력 List에 추가</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="TooLongFrameException"><a href="#TooLongFrameException" class="headerlink" title="TooLongFrameException"></a>TooLongFrameException</h3><p>네티는 비동기 프레임워크이므로 디코딩할 수 있을 때까지 바이트를 메모리 버퍼에 저장해야한다. 또한 디코더가 메모리를 소진할 만큼 많은 데이터를 저장해서는 안된다. 이 문제를 해결하기 위해서 프레임이 지정한 크기를 초과하면 발생하는 <code>TooLongFrameException</code> 예외를 제공한다.</p>
<p>이 예외는 <code>ChannelHandler.exceptionCaught()</code>로 포착할 수 있다. 예외를 처리하는 방법은 디코더의 이용자가 결정할 수 있다. HTTP 같은 특정 프로토콜을 이용할 때는 특수한 응답을 반환할 수 있지만 그 밖의 경우에는 연결을 닫는 것이 유일한 방법이다.</p>
<ul>
<li>TooLongFrameException 예제</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SafeByteToMessageDecoder</span> <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 인바운드 바이트를 메세지로 디코딩하기 위해 ByteToMessageDecoder를 상속받음</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_FRAME_SIZE = <span class="number">1024</span>;</span><br><span class="line">  <span class="comment">// 최대 바이트 수의 임계값을 설정한다.</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> readable = in.readableBytes();</span><br><span class="line">      <span class="keyword">if</span> (readable &gt; MAX_FRAME_SIZE)&#123;</span><br><span class="line">        <span class="comment">// 버퍼의 바이트 수가 MAX_FRAME_SIZE를 초과하는 지 확인</span></span><br><span class="line">        <span class="comment">// 읽을 수 있는 바이트를 모두 건너뛰고</span></span><br><span class="line">        <span class="comment">// TooLongFrameException을 생성한 후</span></span><br><span class="line">        <span class="comment">// 다른 ChannelHandler에 알림</span></span><br><span class="line">        in.skipBytes(readable);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> TooLongFrameException(<span class="string">"Frame Too big"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 필요한 작업을 수행</span></span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ByteToMessageDecoder</code>가 <code>TooLongFrameException</code>을 이용해 <code>ChannelPipeline</code> 내의 다른 <code>ChannelHandler</code>에 프레임 초과를 알리는 코드이다. 이러한 예방책은 프레임 크기가 가변적인 프로토콜을 이용할 때 특히 중요하다.</p>
<br/>

<h2 id="인코더-Encoder"><a href="#인코더-Encoder" class="headerlink" title="인코더(Encoder)"></a>인코더(Encoder)</h2><p>인코더는 아웃바운드 데이터를 한 포맷에서 다른 포맷으로 변환한다. 즉 아웃바운드 데이터를 처리하므로 <code>ChannelOutboundHandler</code>를 상속받는다.</p>
<ul>
<li>Netty의 인코더 클래스<ul>
<li><code>MessageToByteEncoder</code> : 메세지를 바이트로 인코딩</li>
<li><code>MessageToMessageDecoder</code> : 메세지를 다른 메세지로 인코딩</li>
</ul>
</li>
</ul>
<br/>

<h3 id="MessageToByteEncoder"><a href="#MessageToByteEncoder" class="headerlink" title="MessageToByteEncoder"></a>MessageToByteEncoder</h3><p>앞의 <code>ByteToMessageDecoder</code>와 반대로 메세지를 바이트로 변환하는 클래스이다.</p>
<ul>
<li>MessageToByteEncoder API</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>encode(ChannelHandlerContext ctx, I msg, ByteBuf out)</td>
<td>encode 메소드는 구현해야하는 유일한 추상 메소드이다. ByteBuf로 인코딩할 아웃바운드 메세지(I 형식)을 전달하고 호출한다. 그런 다음 ByteBuf는 파이프라인의 다음 ChannelOutboundHandler로 전달된다.</td>
</tr>
</tbody></table>
<p>디코더에는 메소드가 두개이지만 인코더인 이 클래스는 메소드가 하나이다. 디코더의 메소드가 두 개인 이유는 <code>Channel</code>이 닫힌 후 마지막 메세지를 생성해야하는 일이 자주 있기 때문이다.(<code>decodeLast()</code> 메소드). 인코더는 연결이 닫힌 후 메세지를 생성할 필요가 없기 때문에 메소드가 하나이다.</p>
<ul>
<li>ShortToByteEncoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortToByteEncoder</span> <span class="keyword">extends</span> <span class="title">MessageToByteEncoder</span>&lt;<span class="title">Short</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">encode</span><span class="params">(ChannelHandlerContext ctx, Short msg, ByteBuf out)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      out.writeShort(msg);</span><br><span class="line">      <span class="comment">// Short를 ByteBuf에 기록함</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Short 인스턴스를 메세지로 받고 이를 Short 기본형으로 인코딩한 후 <code>ByteBuf</code>에 저장하고 이를 파이프라인 내의 다음 <code>ChannelOutboundHandler</code>로 전달한다. 나가는 <code>Short</code>는 <code>ByteBuf</code>에서 2바이트를 차지한다.</p>
<br/>

<h3 id="MessageToMessageEncoder"><a href="#MessageToMessageEncoder" class="headerlink" title="MessageToMessageEncoder"></a>MessageToMessageEncoder</h3><p>메세지를 아웃바운드 데이터로 인코딩하는 클래스이다.</p>
<ul>
<li>MessageToMessageEncoder API</li>
</ul>
<table>
<thead>
<tr>
<th>이름</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>encode(ChannelHandlerContext ctx, I msg, List<Object> out)</td>
<td>encode()는 구현해야하는 유일한 메소드이다. write()로 기록한 각 메세지는 encode()로 전달된 후 하나 이상의 아웃바운드 메세지로 인코딩된다. 그런다음 파이프라인의 다음 ChannelOutboundHandler로 전달된다.</td>
</tr>
</tbody></table>
<ul>
<li>IntegerToStringEncoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerToStringEncoder</span> <span class="keyword">extends</span> <span class="title">MessageToMessageEncoder</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">encode</span><span class="params">(ChannelHandlerContext ctx, Integer msg,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    out.add(String.valueOf(msg));</span><br><span class="line">    <span class="comment">// Integer를 String으로 변환하고 List에 추가</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="추상-코덱-클래스"><a href="#추상-코덱-클래스" class="headerlink" title="추상 코덱 클래스"></a>추상 코덱 클래스</h2><p>지금까지 인코더와 디코더를 별개로 다뤘지만 인바운드/아웃바운드 데이터와 메세지 변환을 한 클래스에서 관리할 수 있다. 네티의 추상 코덱 클래스는 디코더와 인코더의 작업을 함께 처리할 수 있다. 이 클래스는 <code>ChannelInboundHandler</code>와 <code>ChannelOutboundHandler</code>를 둘 다 구현한다. 이렇게 구현하는 경우 코드의 재사용성과 확장성은 떨어진다.</p>
<br/>

<h3 id="ByteToMessageCodec"><a href="#ByteToMessageCodec" class="headerlink" title="ByteToMessageCodec"></a>ByteToMessageCodec</h3><p>바이트를 일종의 메세지(ex-POJO)로 디코딩한 후 다시 인코딩해야하는 경우, <code>ByteToMessageDecoder</code>와 반대 작업을 하는 <code>MessageToByteEncoder</code>를 결합하는 <code>ByteToMessageCodec</code>을 이용하면 된다.</p>
<ul>
<li>ByteToMessageCodec API</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>decode(ChannelHanlder ctx, ByteBuf in, List<Object> out)</td>
<td>이 메소드는 읽을 바이트가 있을 때 호출되고, 인바운드 ByteBuf를 지정한 메세지 포맷으로 변환하고 파이프라인 내의 다음 ChannelInboundHandler로 전달한다.</td>
</tr>
<tr>
<td>decodeLast(ChannelHandlerContext ctx, ByteBuf in, List<Object> out)</td>
<td>이 메소드의 기본 구현은 decode()로 위임하는 것이다. 이 메소드는 Channel이 비활성화될 때 한번 호출된다. 특별한 처리가 필요한 경우 이 메소드를 재정의한다.</td>
</tr>
<tr>
<td>encode(ChannelHanlderContext ctx, I msg, ByteBuf out)</td>
<td>이 메소드를 I 형식의 각 메소드를 인코딩하고 아웃바운드 ByteBuf에 기록한다.</td>
</tr>
</tbody></table>
<br/>

<h3 id="MessageToMessageCodec"><a href="#MessageToMessageCodec" class="headerlink" title="MessageToMessageCodec"></a>MessageToMessageCodec</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageToMessageCodec</span>&lt;<span class="title">INBOUND_IN</span>, <span class="title">OUTBOUND_IN</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>MessageToMessageCodec의 메소드</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>protected abstract decode(ChannelHandlerContext ctx, INBOUND_IN msg, List<Object> out)</td>
<td>이 메소드는 INBOUND_IN 형식의 메세지를 받으면 이를 OUTBOUND_IN 형식의 메세지로 디코딩한다. 메세지는 ChannelPipeline 내의 다음 ChannelInboundHandler로 전달된다.</td>
</tr>
<tr>
<td>protected abstract encode(ChannelHandlerContext ctx, OUTBOUND_IN msg, List<Object> out)</td>
<td>이 메소드는 OUTBOUND_IN 형식의 각 메세지를 처리할 때마다 호출한다. 처리된 메세지는 INBOUND_IN 형식의 메세지로 인코딩된 후 파이프라인 내의 다음 ChannelOutboundHandler로 전달된다.</td>
</tr>
</tbody></table>
<p><code>INBOUND_IN</code> 메세지는 전송을 위한 형식이고 <code>OUTBOUND_IN</code> 메세지는 어플리케이션에서 처리하는 형식으로 생각하면 된다. 해당 코덱은 서로 다른 메세징 API 간에 메세지를 변환하는 경우 사용된다. 이런 패턴은 레거시 메세지 포맷이나 특정 기업의 메세지 포맷을 이용하는 API와 상호운용해야하는 경우에 사용된다.</p>
<br/>

<h3 id="CombinedChannelDuplexHandler"><a href="#CombinedChannelDuplexHandler" class="headerlink" title="CombinedChannelDuplexHandler"></a>CombinedChannelDuplexHandler</h3><p>디코더와 인코더를 결합해 사용하면 재사용성이 떨어지지만 <code>CombinedChannelDuplexHandler</code>를 이용하면 디코더와 인코더를 단일 유닛으로 배포하면서 재사용성 저하를 방지할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CombinedChannelDuplexHandler</span></span></span><br><span class="line"><span class="class">  &lt;<span class="title">I</span> <span class="keyword">extends</span> <span class="title">ChannelInboundHandler</span>,</span></span><br><span class="line"><span class="class">  <span class="title">O</span> <span class="keyword">extends</span> <span class="title">ChannelOutboundHandler</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이 클래스는 <code>ChannelInboundHandler</code>와 <code>ChannelOutboundHandler</code>의 컨테이너 역할을 한다.</p>
<ul>
<li>ByteToCharDecoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ByteToCharDecoder</span> <span class="keyword">extends</span> <span class="title">ByteToMessageDecoder</span></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf in,</span></span></span><br><span class="line"><span class="function"><span class="params">    List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(in.readableBytes() &gt;= <span class="number">2</span>)&#123;</span><br><span class="line">        out.add(in.readChar());</span><br><span class="line">        <span class="comment">// 나가는 List에 Character 객체를 한 개 이상 추가</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위의 <code>decode()</code>는 <code>ByteBuf</code>에서 한번에 2바이트씩 읽고 <code>Character</code> 객체로 자동 박싱되는 char로 List에 기록한다.</p>
<ul>
<li>CharToByteEncoder 클래스</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharToByteEncoder</span> <span class="keyword">extends</span> <span class="title">MessageToByteEncoder</span>&lt;<span class="title">Character</span>&gt;</span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">encode</span><span class="params">(ChannelHandlerContext ctx, Character msg,</span></span></span><br><span class="line"><span class="function"><span class="params">    ByteBuf out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      out.writeChar(msg);</span><br><span class="line">      <span class="comment">// Character를 char로 디코딩하고 아웃바운드 ByteBuf로 기록</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CharToByteEncoder</code>는 <code>Character</code>를 다시 바이트로 변환한다. 이 클래스는 char 메세지를 ByteBuf로 인코딩해야하므로 <code>MessageToByteEncoder</code>를 상속받으며, ByteBuf에 직접 기록하는 방법으로 인코딩한다.</p>
<ul>
<li>CombinedChannelDuplexHandler&lt;I,O&gt;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CombinedByteCharCodec</span> <span class="keyword">extends</span></span></span><br><span class="line"><span class="class">  <span class="title">CombinedChannelDuplexHandler</span>&lt;<span class="title">ByteToCharDecoder</span>, <span class="title">CharToByteEncoder</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">CombinedByteCharCodec</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(<span class="keyword">new</span> ByteToCharDecoder(), <span class="keyword">new</span> CharToByteEncoder());</span><br><span class="line">    <span class="comment">// 인스턴스를 부모로 전달</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위의 인코더와 디코더를 이용해 결합해 코덱을 만들 수 있다.  </p>
<p>이처럼 코덱 클래스 중 하나를 이용해 구현하거나 구현한 코덱을 결합할 수도 있다.</p>
<hr>
<ul>
<li>참고 서적<ul>
<li>네티 인 액션</li>
<li>자바 네트워크 소녀 네티  </li>
</ul>
</li>
</ul>
<hr>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/categories/server/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/categories/server/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/categories/server/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/server/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/avatar.png" alt="Your name">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Your name
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Your title
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Your location</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            73
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            18
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            41
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">
                Follow</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/ppoffice">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/cs/">
            <span class="level-start">
                <span class="level-item">CS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/cs/database/">
            <span class="level-start">
                <span class="level-item">DataBase</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/cs/os/">
            <span class="level-start">
                <span class="level-item">OS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/programming/">
            <span class="level-start">
                <span class="level-item">Programming</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">37</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/programming/common/">
            <span class="level-start">
                <span class="level-item">Common</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/programming/java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">24</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/programming/javascript/">
            <span class="level-start">
                <span class="level-item">Javascript</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/server/">
            <span class="level-start">
                <span class="level-item">Server</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">16</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/server/netty/">
            <span class="level-start">
                <span class="level-item">Netty</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/server/orm/">
            <span class="level-start">
                <span class="level-item">ORM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/server/spring/">
            <span class="level-start">
                <span class="level-item">Spring</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/server/test/">
            <span class="level-start">
                <span class="level-item">Test</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/system/">
            <span class="level-start">
                <span class="level-item">System</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/system/docker/">
            <span class="level-start">
                <span class="level-item">Docker</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/system/shell/">
            <span class="level-start">
                <span class="level-item">Shell</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/think/">
            <span class="level-start">
                <span class="level-item">Think</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/troubleshooting/">
            <span class="level-start">
                <span class="level-item">Troubleshooting</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/web/">
            <span class="level-start">
                <span class="level-item">Web</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/authrization/" style="font-size: 11.11px;">Authrization</a> <a href="/tags/design-pattern/" style="font-size: 10px;">Design Pattern</a> <a href="/tags/docker/" style="font-size: 12.22px;">Docker</a> <a href="/tags/effective-java/" style="font-size: 18.89px;">Effective Java</a> <a href="/tags/encryption/" style="font-size: 10px;">Encryption</a> <a href="/tags/fish-shell/" style="font-size: 10px;">Fish Shell</a> <a href="/tags/functional-programming/" style="font-size: 10px;">Functional Programming</a> <a href="/tags/functional-thinking/" style="font-size: 12.22px;">Functional Thinking</a> <a href="/tags/git/" style="font-size: 11.11px;">Git</a> <a href="/tags/gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/http/" style="font-size: 10px;">HTTP</a> <a href="/tags/hash/" style="font-size: 10px;">Hash</a> <a href="/tags/hibernate/" style="font-size: 12.22px;">Hibernate</a> <a href="/tags/intellij/" style="font-size: 10px;">IntelliJ</a> <a href="/tags/jpa/" style="font-size: 10px;">JPA</a> <a href="/tags/java/" style="font-size: 20px;">Java</a> <a href="/tags/javascript/" style="font-size: 16.67px;">Javascript</a> <a href="/tags/junit/" style="font-size: 10px;">Junit</a> <a href="/tags/maven/" style="font-size: 10px;">Maven</a> <a href="/tags/meetup/" style="font-size: 10px;">Meetup</a> <a href="/tags/mysql/" style="font-size: 12.22px;">MySQL</a> <a href="/tags/netty/" style="font-size: 15.56px;">Netty</a> <a href="/tags/network/" style="font-size: 15.56px;">Network</a> <a href="/tags/oauth2/" style="font-size: 12.22px;">OAuth2</a> <a href="/tags/os/" style="font-size: 10px;">OS</a> <a href="/tags/reactjs/" style="font-size: 10px;">ReactJS</a> <a href="/tags/refactoring/" style="font-size: 10px;">Refactoring</a> <a href="/tags/sts/" style="font-size: 11.11px;">STS</a> <a href="/tags/shell/" style="font-size: 10px;">Shell</a> <a href="/tags/spring/" style="font-size: 13.33px;">Spring</a> <a href="/tags/springboot/" style="font-size: 12.22px;">SpringBoot</a> <a href="/tags/stub/" style="font-size: 10px;">Stub</a> <a href="/tags/study/" style="font-size: 12.22px;">Study</a> <a href="/tags/tdd/" style="font-size: 10px;">TDD</a> <a href="/tags/tacademy/" style="font-size: 10px;">Tacademy</a> <a href="/tags/test/" style="font-size: 12.22px;">Test</a> <a href="/tags/think/" style="font-size: 10px;">Think</a> <a href="/tags/troubleshooting/" style="font-size: 14.44px;">Troubleshooting</a> <a href="/tags/web/" style="font-size: 12.22px;">Web</a> <a href="/tags/women-who-code/" style="font-size: 10px;">Women Who Code</a> <a href="/tags/생활코딩/" style="font-size: 17.78px;">생활코딩</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020-02-01-reverting-invalid-git-merge/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="git 커밋 중간에 잘못된 merge 되돌리기">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-01T14:41:26.000Z">2020-02-01</time></div>
                    <a href="/2020-02-01-reverting-invalid-git-merge/" class="title has-link-black-ter is-size-6 has-text-weight-normal">git 커밋 중간에 잘못된 merge 되돌리기</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/troubleshooting/">Troubleshooting</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020-01-20-women-who-code-talk-with-sonia-from-ms/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Talk with Sonia from Microsoft - Inspiring Tech Women">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-20T13:54:30.000Z">2020-01-20</time></div>
                    <a href="/2020-01-20-women-who-code-talk-with-sonia-from-ms/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Talk with Sonia from Microsoft - Inspiring Tech Women</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/think/">Think</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020-01-19-encryption-vs-hash/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="암호화 vs 해시">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-19T12:03:04.000Z">2020-01-19</time></div>
                    <a href="/2020-01-19-encryption-vs-hash/" class="title has-link-black-ter is-size-6 has-text-weight-normal">암호화 vs 해시</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/common/">Common</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019-10-20-java-stream/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Java - Stream 기초">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-19T21:54:07.000Z">2019-10-20</time></div>
                    <a href="/2019-10-20-java-stream/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Java - Stream 기초</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/java/">Java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019-10-20-functional-thinking-ch7/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="함수형 사고 - ch7 실용적 사고">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-19T21:47:20.000Z">2019-10-20</time></div>
                    <a href="/2019-10-20-functional-thinking-ch7/" class="title has-link-black-ter is-size-6 has-text-weight-normal">함수형 사고 - ch7 실용적 사고</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/common/">Common</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">February 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">July 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">June 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/authrization/">
                        <span class="tag">Authrization</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/design-pattern/">
                        <span class="tag">Design Pattern</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/effective-java/">
                        <span class="tag">Effective Java</span>
                        <span class="tag is-grey">21</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/encryption/">
                        <span class="tag">Encryption</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/fish-shell/">
                        <span class="tag">Fish Shell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/functional-programming/">
                        <span class="tag">Functional Programming</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/functional-thinking/">
                        <span class="tag">Functional Thinking</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">Git</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/gradle/">
                        <span class="tag">Gradle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/http/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hash/">
                        <span class="tag">Hash</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hibernate/">
                        <span class="tag">Hibernate</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/intellij/">
                        <span class="tag">IntelliJ</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jpa/">
                        <span class="tag">JPA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">25</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/javascript/">
                        <span class="tag">Javascript</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/junit/">
                        <span class="tag">Junit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">Maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/meetup/">
                        <span class="tag">Meetup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/netty/">
                        <span class="tag">Netty</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/network/">
                        <span class="tag">Network</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/oauth2/">
                        <span class="tag">OAuth2</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/os/">
                        <span class="tag">OS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/reactjs/">
                        <span class="tag">ReactJS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/refactoring/">
                        <span class="tag">Refactoring</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sts/">
                        <span class="tag">STS</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/shell/">
                        <span class="tag">Shell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">SpringBoot</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/stub/">
                        <span class="tag">Stub</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/study/">
                        <span class="tag">Study</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tdd/">
                        <span class="tag">TDD</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tacademy/">
                        <span class="tag">Tacademy</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/test/">
                        <span class="tag">Test</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/think/">
                        <span class="tag">Think</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/troubleshooting/">
                        <span class="tag">Troubleshooting</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/web/">
                        <span class="tag">Web</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/women-who-code/">
                        <span class="tag">Women Who Code</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/생활코딩/">
                        <span class="tag">생활코딩</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020-02-01-reverting-invalid-git-merge/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="git 커밋 중간에 잘못된 merge 되돌리기">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-01T14:41:26.000Z">2020-02-01</time></div>
                    <a href="/2020-02-01-reverting-invalid-git-merge/" class="title has-link-black-ter is-size-6 has-text-weight-normal">git 커밋 중간에 잘못된 merge 되돌리기</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/troubleshooting/">Troubleshooting</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020-01-20-women-who-code-talk-with-sonia-from-ms/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Talk with Sonia from Microsoft - Inspiring Tech Women">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-20T13:54:30.000Z">2020-01-20</time></div>
                    <a href="/2020-01-20-women-who-code-talk-with-sonia-from-ms/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Talk with Sonia from Microsoft - Inspiring Tech Women</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/think/">Think</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020-01-19-encryption-vs-hash/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="암호화 vs 해시">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-19T12:03:04.000Z">2020-01-19</time></div>
                    <a href="/2020-01-19-encryption-vs-hash/" class="title has-link-black-ter is-size-6 has-text-weight-normal">암호화 vs 해시</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/common/">Common</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019-10-20-java-stream/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Java - Stream 기초">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-19T21:54:07.000Z">2019-10-20</time></div>
                    <a href="/2019-10-20-java-stream/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Java - Stream 기초</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/java/">Java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019-10-20-functional-thinking-ch7/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="함수형 사고 - ch7 실용적 사고">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-19T21:47:20.000Z">2019-10-20</time></div>
                    <a href="/2019-10-20-functional-thinking-ch7/" class="title has-link-black-ter is-size-6 has-text-weight-normal">함수형 사고 - ch7 실용적 사고</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/programming/common/">Common</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">February 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">July 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">June 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/authrization/">
                        <span class="tag">Authrization</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/design-pattern/">
                        <span class="tag">Design Pattern</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/effective-java/">
                        <span class="tag">Effective Java</span>
                        <span class="tag is-grey">21</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/encryption/">
                        <span class="tag">Encryption</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/fish-shell/">
                        <span class="tag">Fish Shell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/functional-programming/">
                        <span class="tag">Functional Programming</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/functional-thinking/">
                        <span class="tag">Functional Thinking</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">Git</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/gradle/">
                        <span class="tag">Gradle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/http/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hash/">
                        <span class="tag">Hash</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hibernate/">
                        <span class="tag">Hibernate</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/intellij/">
                        <span class="tag">IntelliJ</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jpa/">
                        <span class="tag">JPA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">25</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/javascript/">
                        <span class="tag">Javascript</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/junit/">
                        <span class="tag">Junit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">Maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/meetup/">
                        <span class="tag">Meetup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/mysql/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/netty/">
                        <span class="tag">Netty</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/network/">
                        <span class="tag">Network</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/oauth2/">
                        <span class="tag">OAuth2</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/os/">
                        <span class="tag">OS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/reactjs/">
                        <span class="tag">ReactJS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/refactoring/">
                        <span class="tag">Refactoring</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sts/">
                        <span class="tag">STS</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/shell/">
                        <span class="tag">Shell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">SpringBoot</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/stub/">
                        <span class="tag">Stub</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/study/">
                        <span class="tag">Study</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tdd/">
                        <span class="tag">TDD</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tacademy/">
                        <span class="tag">Tacademy</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/test/">
                        <span class="tag">Test</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/think/">
                        <span class="tag">Think</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/troubleshooting/">
                        <span class="tag">Troubleshooting</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/web/">
                        <span class="tag">Web</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/women-who-code/">
                        <span class="tag">Women Who Code</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/생활코딩/">
                        <span class="tag">생활코딩</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="Jade&#39;s Blog" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 j2de&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://j2de.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>